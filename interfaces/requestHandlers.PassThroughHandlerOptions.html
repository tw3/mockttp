<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>PassThroughHandlerOptions | mockttp</title><meta name="description" content="Documentation for mockttp"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">mockttp</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">mockttp</a></li><li><a href="../modules/requestHandlers.html">requestHandlers</a></li><li><a href="requestHandlers.PassThroughHandlerOptions.html">PassThroughHandlerOptions</a></li></ul><h1>Interface PassThroughHandlerOptions</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">PassThroughHandlerOptions</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#clientCertificateHostMap" class="tsd-kind-icon">client<wbr/>Certificate<wbr/>Host<wbr/>Map</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#forwarding" class="tsd-kind-icon">forwarding</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#ignoreHostCertificateErrors" class="tsd-kind-icon">ignore<wbr/>Host<wbr/>Certificate<wbr/>Errors</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#ignoreHostHttpsErrors" class="tsd-kind-icon">ignore<wbr/>Host<wbr/>Https<wbr/>Errors</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#lookupOptions" class="tsd-kind-icon">lookup<wbr/>Options</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#proxyConfig" class="tsd-kind-icon">proxy<wbr/>Config</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#transformRequest" class="tsd-kind-icon">transform<wbr/>Request</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#transformResponse" class="tsd-kind-icon">transform<wbr/>Response</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#trustAdditionalCAs" class="tsd-kind-icon">trust<wbr/>AdditionalCAs</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#beforeRequest" class="tsd-kind-icon">before<wbr/>Request</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#beforeResponse" class="tsd-kind-icon">before<wbr/>Response</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="clientCertificateHostMap" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> client<wbr/>Certificate<wbr/>Host<wbr/>Map<a href="#clientCertificateHostMap" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">client<wbr/>Certificate<wbr/>Host<wbr/>Map<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">{}</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L515">src/rules/requests/request-handlers.ts:515</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A mapping of hosts to client certificates to use, in the form of
<code>{ key, cert }</code> objects (none, by default)</p>
</div></div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-index-signature"><h5><span class="tsd-signature-symbol">[</span>host: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">]: </span><span class="tsd-signature-symbol">{ </span>passphrase<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">; </span>pfx<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol"> }</span></h5><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> passphrase<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">string</span></h5></li><li class="tsd-parameter"><h5>pfx<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span></h5></li></ul></li></ul></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="forwarding" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> forwarding<a href="#forwarding" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">forwarding<span class="tsd-signature-symbol">?:</span> <a href="requestHandlers.ForwardingOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">ForwardingOptions</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L486">src/rules/requests/request-handlers.ts:486</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The forwarding configuration for the passthrough rule.
This generally shouldn&#39;t be used explicitly unless you&#39;re
building rule data by hand. Instead, call <code>thenPassThrough</code>
to send data directly or <code>thenForwardTo</code> with options to
configure traffic forwarding.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="ignoreHostCertificateErrors" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> ignore<wbr/>Host<wbr/>Certificate<wbr/>Errors<a href="#ignoreHostCertificateErrors" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">ignore<wbr/>Host<wbr/>Certificate<wbr/>Errors<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L498">src/rules/requests/request-handlers.ts:498</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Deprecated alias for ignoreHostHttpsErrors.</p>
</div><dl class="tsd-comment-tags"><dt>deprecated</dt><dd></dd></dl></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="ignoreHostHttpsErrors" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> ignore<wbr/>Host<wbr/>Https<wbr/>Errors<a href="#ignoreHostHttpsErrors" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">ignore<wbr/>Host<wbr/>Https<wbr/>Errors<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L492">src/rules/requests/request-handlers.ts:492</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A list of hostnames for which server certificate and TLS version errors
should be ignored (none, by default).</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="lookupOptions" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> lookup<wbr/>Options<a href="#lookupOptions" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">lookup<wbr/>Options<span class="tsd-signature-symbol">?:</span> <a href="requestHandlers.PassThroughLookupOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">PassThroughLookupOptions</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L543">src/rules/requests/request-handlers.ts:543</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Custom DNS options, to allow configuration of the resolver used
when forwarding requests upstream. Passing any option switches
from using node&#39;s default dns.lookup function to using the
cacheable-lookup module, which will cache responses.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="proxyConfig" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> proxy<wbr/>Config<a href="#proxyConfig" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">proxy<wbr/>Config<span class="tsd-signature-symbol">?:</span> <a href="../modules.html#ProxyConfig" class="tsd-signature-type" data-tsd-kind="Type alias">ProxyConfig</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L535">src/rules/requests/request-handlers.ts:535</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Upstream proxy configuration: pass through requests via this proxy.</p>
</div><div><p>If this is undefined, no proxy will be used. To configure a proxy
provide either:</p>
<ul>
<li>a ProxySettings object</li>
<li>a callback which will be called with an object containing the
hostname, and must return a ProxySettings object or undefined.</li>
<li>an array of ProxySettings or callbacks. The array will be
processed in order, and the first not-undefined ProxySettings
found will be used.</li>
</ul>
<p>When using a remote client, this parameter or individual array
values may be passed by reference, using the name of a rule
parameter configured in the standalone server.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="transformRequest" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> transform<wbr/>Request<a href="#transformRequest" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">transform<wbr/>Request<span class="tsd-signature-symbol">?:</span> <a href="requestHandlers.RequestTransform.html" class="tsd-signature-type" data-tsd-kind="Interface">RequestTransform</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L558">src/rules/requests/request-handlers.ts:558</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A set of data to automatically transform a request. This includes properties
to support many transformation common use cases.</p>
</div><div><p>For advanced cases, a custom callback using beforeRequest can be used instead.
Using this field however where possible is typically simpler, more declarative,
and can be more performant. The two options are mutually exclusive: you cannot
use both transformRequest and a beforeRequest callback.</p>
<p>Only one transformation for each target (method, headers &amp; body) can be
specified. If more than one is specified then an error will be thrown when the
rule is registered.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="transformResponse" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> transform<wbr/>Response<a href="#transformResponse" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">transform<wbr/>Response<span class="tsd-signature-symbol">?:</span> <a href="requestHandlers.ResponseTransform.html" class="tsd-signature-type" data-tsd-kind="Interface">ResponseTransform</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L573">src/rules/requests/request-handlers.ts:573</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A set of data to automatically transform a response. This includes properties
to support many transformation common use cases.</p>
</div><div><p>For advanced cases, a custom callback using beforeResponse can be used instead.
Using this field however where possible is typically simpler, more declarative,
and can be more performant. The two options are mutually exclusive: you cannot
use both transformResponse and a beforeResponse callback.</p>
<p>Only one transformation for each target (status, headers &amp; body) can be
specified. If more than one is specified then an error will be thrown when the
rule is registered.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="trustAdditionalCAs" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> trust<wbr/>AdditionalCAs<a href="#trustAdditionalCAs" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">trust<wbr/>AdditionalCAs<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">{ </span>cert<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-symbol">{ </span>certPath<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">[]</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L509">src/rules/requests/request-handlers.ts:509</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>An array of additional certificates, which should be trusted as certificate
authorities for upstream hosts, in addition to Node.js&#39;s built-in certificate
authorities.</p>
</div><div><p>Each certificate should be an object with either a <code>cert</code> key and a string
or buffer value containing the PEM certificate, or a <code>certPath</code> key and a
string value containing the local path to the PEM certificate.</p>
</div></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="beforeRequest" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> before<wbr/>Request<a href="#beforeRequest" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">before<wbr/>Request<span class="tsd-signature-symbol">(</span>req<span class="tsd-signature-symbol">: </span><a href="CompletedRequest.html" class="tsd-signature-type" data-tsd-kind="Interface">CompletedRequest</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../modules.html#MaybePromise" class="tsd-signature-type" data-tsd-kind="Type alias">MaybePromise</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="requestHandlers.CallbackRequestResult.html" class="tsd-signature-type" data-tsd-kind="Interface">CallbackRequestResult</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L595">src/rules/requests/request-handlers.ts:595</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A callback that will be passed the full request before it is passed through,
and which returns an object that defines how the the request content should
be transformed before it&#39;s passed to the upstream server.</p>
</div><div><p>The callback can return an object to define how the request should be changed.
All fields on the object are optional, and returning undefined is equivalent
to returning an empty object (transforming nothing). The possible fields are:</p>
<ul>
<li><code>method</code> (a replacement HTTP verb, capitalized)</li>
<li><code>url</code> (a full URL to send the request to)</li>
<li><code>headers</code> (object with string keys &amp; values, replaces all headers if set)</li>
<li><code>body</code> (string or buffer, replaces the body if set)</li>
<li><code>json</code> (object, to be sent as a JSON-encoded body, taking precedence
over <code>body</code> if both are set)</li>
<li><code>response</code> (a response callback result, either a response object or &#39;close&#39;,
if provided this will be used as an immediately response, the request will
not be passed through at all, and any beforeResponse callback will never
fire)</li>
</ul>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>req: <a href="CompletedRequest.html" class="tsd-signature-type" data-tsd-kind="Interface">CompletedRequest</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="../modules.html#MaybePromise" class="tsd-signature-type" data-tsd-kind="Type alias">MaybePromise</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="requestHandlers.CallbackRequestResult.html" class="tsd-signature-type" data-tsd-kind="Interface">CallbackRequestResult</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="beforeResponse" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> before<wbr/>Response<a href="#beforeResponse" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">before<wbr/>Response<span class="tsd-signature-symbol">(</span>res<span class="tsd-signature-symbol">: </span><a href="requestHandlers.PassThroughResponse.html" class="tsd-signature-type" data-tsd-kind="Interface">PassThroughResponse</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../modules.html#MaybePromise" class="tsd-signature-type" data-tsd-kind="Type alias">MaybePromise</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="../modules/requestHandlers.html#CallbackResponseResult" class="tsd-signature-type" data-tsd-kind="Type alias">CallbackResponseResult</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/httptoolkit/mockttp/blob/a6c8e15/src/rules/requests/request-handlers.ts#L614">src/rules/requests/request-handlers.ts:614</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>A callback that will be passed the full response before it is passed through,
and which returns a value that defines how the the response content should
be transformed before it&#39;s returned to the client.</p>
</div><div><p>The callback can either return an object to define how the response should be
changed, or the string &#39;close&#39; to immediately close the underlying connection.</p>
<p>All fields on the object are optional, and returning undefined is equivalent
to returning an empty object (transforming nothing). The possible fields are:</p>
<ul>
<li><code>status</code> (number, will replace the HTTP status code)</li>
<li><code>headers</code> (object with string keys &amp; values, replaces all headers if set)</li>
<li><code>body</code> (string or buffer, replaces the body if set)</li>
<li><code>json</code> (object, to be sent as a JSON-encoded body, taking precedence
over <code>body</code> if both are set)</li>
</ul>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>res: <a href="requestHandlers.PassThroughResponse.html" class="tsd-signature-type" data-tsd-kind="Interface">PassThroughResponse</a></h5></li></ul><h4 class="tsd-returns-title">Returns <a href="../modules.html#MaybePromise" class="tsd-signature-type" data-tsd-kind="Type alias">MaybePromise</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><a href="../modules/requestHandlers.html#CallbackResponseResult" class="tsd-signature-type" data-tsd-kind="Type alias">CallbackResponseResult</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="../modules/completionCheckers.html">completion<wbr/>Checkers</a></li><li class=" tsd-kind-namespace"><a href="../modules/matchers.html">matchers</a></li><li class="current tsd-kind-namespace"><a href="../modules/requestHandlers.html">request<wbr/>Handlers</a></li><li class=" tsd-kind-namespace"><a href="../modules/webSocketHandlers.html">web<wbr/>Socket<wbr/>Handlers</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface tsd-parent-kind-namespace"><a href="requestHandlers.PassThroughHandlerOptions.html" class="tsd-kind-icon">Pass<wbr/>Through<wbr/>Handler<wbr/>Options</a><ul><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#clientCertificateHostMap" class="tsd-kind-icon">client<wbr/>Certificate<wbr/>Host<wbr/>Map</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#forwarding" class="tsd-kind-icon">forwarding</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#ignoreHostCertificateErrors" class="tsd-kind-icon">ignore<wbr/>Host<wbr/>Certificate<wbr/>Errors</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#ignoreHostHttpsErrors" class="tsd-kind-icon">ignore<wbr/>Host<wbr/>Https<wbr/>Errors</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#lookupOptions" class="tsd-kind-icon">lookup<wbr/>Options</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#proxyConfig" class="tsd-kind-icon">proxy<wbr/>Config</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#transformRequest" class="tsd-kind-icon">transform<wbr/>Request</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#transformResponse" class="tsd-kind-icon">transform<wbr/>Response</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#trustAdditionalCAs" class="tsd-kind-icon">trust<wbr/>AdditionalCAs</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#beforeRequest" class="tsd-kind-icon">before<wbr/>Request</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="requestHandlers.PassThroughHandlerOptions.html#beforeResponse" class="tsd-kind-icon">before<wbr/>Response</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>